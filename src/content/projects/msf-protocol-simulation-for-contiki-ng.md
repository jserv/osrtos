---
title: MSF Protocol Simulation for Contiki-NG
summary: A simulation project for the Minimal Scheduling Function (MSF) protocol within
  the Contiki-NG RTOS environment. It implements node and root roles using the TSCH
  MAC layer and 6top protocol for autonomous schedule management in 6TiSCH networks.
slug: msf-protocol-simulation-for-contiki-ng
codeUrl: https://github.com/Otabek8866/msf-simulation
star: 0
lastUpdated: '2022-04-25'
rtos: contiki-ng
topics:
- contiki-ng
- msf
- scheduling
- tsch
isShow: false
createdAt: '2025-12-31'
updatedAt: '2025-12-31'
---

## Overview

This project provides a simulation environment for the Minimal Scheduling Function (MSF) protocol, built on top of the Contiki-NG operating system. MSF is a critical component of the 6TiSCH (IPv6 over the TSCH mode of IEEE 802.15.4e) architecture, defining how nodes autonomously manage their communication schedules by adding or removing cells based on traffic demands.

The simulation is based on a specific implementation of MSF and is designed to evaluate the protocol's behavior in a multi-node network. It leverages the Time-Slotted Channel Hopping (TSCH) MAC layer and the 6top Protocol (6P) to handle negotiation between neighboring nodes.

## Technical Architecture

The project is structured into two primary components: a root node (`msf-root.c`) and standard network nodes (`msf-node.c`). These components interact within the Contiki-NG framework, utilizing the following stack features:

- **TSCH MAC Layer**: Provides the time-slotted and frequency-hopping foundation required for deterministic communication.
- **6top Protocol (6P)**: Enables the negotiation of scheduling cells between neighbors.
- **MSF Service**: The core logic that decides when to request new cells or delete underutilized ones based on the current traffic load.

## Configuration and Customization

The project includes a `project-conf.h` file that allows for fine-tuning the simulation parameters. Key configurable settings include:

- **TSCH Schedule Length**: Defined by `TSCH_SCHEDULE_CONF_DEFAULT_LENGTH`, typically set to a prime number like 101 to minimize collisions.
- **Traffic Patterns**: The `PACKET_SENDING_INTERVAL` and `UDP_PAYLOAD_SIZE` define the data load generated by the nodes, which in turn triggers MSF's cell allocation logic.
- **Security**: Support for TSCH security can be toggled via the `WITH_SECURITY` flag.
- **Logging**: Granular log levels for MAC, 6top, and RPL layers help in debugging protocol transitions and scheduling changes.

## Building the Project

The build system is managed via a standard Contiki-NG Makefile. It includes specific modules for the 6top sublayer and the MSF service. The project excludes several platforms (like `sky`, `z1`, and `nrf52dk`) to focus on simulation-compatible targets, likely intended for use with the Cooja simulator.

```c
// Example of MSF-related configuration in project-conf.h
#define TSCH_CONF_WITH_SIXTOP 1
#define SIXTOP_CONF_MAX_TRANSACTIONS 2
#define PACKET_SENDING_INTERVAL 30
```

## Key Features

- **Autonomous Scheduling**: Demonstrates how nodes adapt their bandwidth without a centralized controller.
- **Role-Based Implementation**: Distinct logic for the DAG (Directed Acyclic Graph) Root and leaf nodes.
- **Energy Monitoring**: Includes the `simple-energest` module to track power consumption during the simulation, which is vital for evaluating the efficiency of scheduling algorithms in resource-constrained IoT devices.
