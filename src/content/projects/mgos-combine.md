---
title: mgos-combine
summary: A Go-based utility for merging Mongoose OS firmware components into a single
  binary file. It facilitates the creation of unified firmware images from the standard
  Mongoose OS ZIP distribution, supporting configurable output sizes and integration
  into CI/CD pipelines via Docker.
slug: mgos-combine
codeUrl: https://github.com/yaourdt/mgos-combine
star: 4
version: release-0.2.5
lastUpdated: '2020-12-27'
rtos: mongoose-os
topics:
- mongoose-os
isShow: false
createdAt: '2025-12-30'
updatedAt: '2025-12-30'
---

## Streamlining Mongoose OS Firmware Management

Mongoose OS is a popular framework for IoT development, known for its ability to handle complex tasks on microcontrollers like the ESP32 and ESP8266. When building firmware with Mongoose OS, the output is typically a ZIP file containing several distinct parts: the bootloader, the application code, and the filesystem. While this modular approach is excellent for development, certain deployment scenarios or flashing tools require a single, contiguous binary file.

`mgos-combine` is a specialized command-line tool designed to bridge this gap. Written in Go, it automates the process of extracting these components and stitching them together into a single `.bin` file that matches the memory layout of the target hardware.

## Key Features and Capabilities

The primary function of `mgos-combine` is to take a standard `fw.zip` generated by the Mongoose OS build process and produce a single output binary. This is particularly useful for production environments where a single flash image is preferred for simplified manufacturing or for use with generic flashing utilities that do not support the Mongoose OS ZIP format.

**Core features include:**
- **Configurable Output Size**: Users can specify the target flash size (defaulting to 4096 KB), ensuring the resulting binary fits the specific hardware profile.
- **Safety Checks**: The tool includes a force flag (`-f`) to allow writing even if the output file size is technically too small for the combined components, providing flexibility for advanced users.
- **Cross-Platform Support**: Pre-compiled binaries are available for both Linux and macOS, ensuring developers can use the tool regardless of their primary workstation OS.
- **CI/CD Integration**: A dedicated Docker image is provided, making it easy to integrate firmware combination into automated build pipelines.

## Technical Implementation

The tool is built using the Go programming language, leveraging its efficient handling of file I/O and zip archives. It utilizes the `goptions` library for a clean command-line interface. By providing a Dockerized version, the project ensures that developers can run the tool in a consistent environment without needing to install a Go runtime locally. The project structure is minimal and focused, containing the core logic in a single `main.go` file, which handles the parsing of the firmware ZIP and the sequential writing of binary segments to the output file.

## Usage and Integration

Using `mgos-combine` is straightforward. In its simplest form, it looks for a `fw.zip` in the local build directory and generates an `output.bin` at the specified size.

```bash
mgos-combine -i ./build/fw.zip -o firmware_full.bin -s 4096
```

For teams using automated workflows, the Docker image allows for seamless integration into GitHub Actions or other CI providers. This allows for the automatic generation of production-ready binaries every time a new firmware version is tagged or released.

This utility is an essential part of the toolkit for Mongoose OS developers who need to move beyond the standard development cycle into production-ready firmware distribution.
