---
import type {CollectionEntry} from 'astro:content';

interface Props {
  entry: CollectionEntry<'rtos'>;
}

const {entry} = Astro.props;
const {title, summary, slug, star, lastUpdated, platforms, licenses, version} = entry.data;
---

<article
   class="border border-gray-200 dark:border-gray-700 rounded-lg p-6 transition-all bg-white dark:bg-gray-800 h-full flex flex-col hover:border-primary-600 dark:hover:border-primary-500 hover:shadow-lg hover:shadow-primary-600/10 dark:hover:shadow-primary-500/20 hover:-translate-y-0.5">
  <a href={`/rtos/${slug}/`} class="no-underline text-inherit flex flex-col h-full">
    <div class="flex items-center justify-between gap-3 mb-3 flex-wrap">
      <h3 class="m-0 text-2xl font-semibold text-gray-900 dark:text-gray-100">{title}</h3>
      {version && (
         <span
            class="bg-secondary-100 dark:bg-secondary-900/30 text-secondary-800 dark:text-secondary-400 px-3 py-1 rounded-lg text-xs font-semibold font-mono">
          {version}
        </span>
      )}
    </div>
    <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed mb-4 line-clamp-3 min-h-16">{summary}</p>

    <div class="flex justify-between items-center mb-4 text-sm text-gray-600 dark:text-gray-400 flex-wrap gap-2">
      <span class="font-semibold text-warning-500">‚≠ê {star.toLocaleString()}</span>
      <span class="text-gray-500 dark:text-gray-500 text-xs">
        Updated: {lastUpdated.toLocaleDateString()}
      </span>
    </div>

    {platforms.length > 0 && (
       <div class="flex flex-wrap gap-2 mb-2">
         {platforms.slice(0, 8).map(p => (
            <span
               class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full text-xs font-medium">{p}</span>
         ))}
         {platforms.length > 8 && (
            <span
               class="bg-warning-100 dark:bg-warning-900/30 text-warning-800 dark:text-warning-400 px-3 py-1 rounded-full text-xs font-medium">+{platforms.length - 3}
              more</span>
         )}
       </div>
    )}

    {licenses.length > 0 && (
       <div class="flex flex-wrap gap-2 mb-2">
         {licenses.map(l => (
            <span
               class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full text-xs font-medium">{l}</span>
         ))}
       </div>
    )}
  </a>
</article>
